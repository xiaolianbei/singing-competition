(this.webpackJsonptriphub=this.webpackJsonptriphub||[]).push([[0],{470:function(e,t,a){e.exports=a(796)},699:function(e,t){},701:function(e,t){},712:function(e,t){},714:function(e,t){},741:function(e,t){},743:function(e,t){},744:function(e,t){},749:function(e,t){},751:function(e,t){},757:function(e,t){},759:function(e,t){},778:function(e,t){},790:function(e,t){},793:function(e,t){},796:function(e,t,a){"use strict";a.r(t);a(471),a(483);var n=a(0),r=a.n(n),o=a(76),c=a.n(o),i=a(451),l=a(61).a(),s=a(36),u=r.a.createContext({}),m=a(22);var d,p=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("p",null,"Page No Found"))},g=a(13),f=a(434),h=a(87),b=a(150),v=a(103),E=a(5),w=a.n(E),y=a(17),N=a(837),k=function(){var e=Object(N.a)(["authToken"]),t=Object(g.a)(e,3),a=t[0],n=t[1],r=t[2];return[a.authToken,function(e){return n("authToken",e)},function(){return r("authToken")}]},x=function(){var e=k(),t=Object(g.a)(e,3)[2],a=Object(v.a)();return function(){var e=Object(y.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.clearStore();case 2:t(),window.location.href="./#/logout";case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},j=Object(b.a)(d||(d=Object(h.a)(["\n  mutation login($email: String!, $code: String!) {\n    login(input: { email: $email,code:$code }) {\n      token\n      email\n    }\n  }\n"]))),O=a(78);var S=function(e){e.warning&&(O.b.error("The Email or Group you entered does not match our records. Please try again or contact xiaolianbei.org@gmail.com for help"),O.b.clearWaitingQueue());var t=function(){var e=Object(s.g)(),t=k(),a=Object(g.a)(t,3),n=(a[0],a[1]),r=a[2],o=Object(v.b)(j,{onCompleted:function(t){if(null===t.login){e.push("./?warning")}else{n(t.login.token+"&&"+t.login.email);e.push("./list")}}}),c=Object(g.a)(o,2),i=c[0];return[function(e,t){return r(),i({variables:{email:e,code:t}})},c[1]]}(),a=Object(g.a)(t,2),n=a[0],o=a[1],c=Object(f.a)({shouldUseNativeValidation:!0}),i=c.handleSubmit,l=c.register,u=o.loading;return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"hero d-flex flex-column justify-content-center align-items-center",id:"home"},r.a.createElement(O.a,{limit:1}),r.a.createElement("div",{className:"bg-overlay"}),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-8 col-md-10 mx-auto col-12"},r.a.createElement("div",{className:"hero-text mt-5 text-center"},r.a.createElement("h6",{"data-aos":"fade-up","data-aos-delay":"300"},"Welcome to NAAAC-North America Alumni Alliance Cup Singing Competition Voting System"),r.a.createElement("h1",{className:"text-white","data-aos":"fade-up","data-aos-delay":"500"},"NAAAC"),r.a.createElement("form",{onSubmit:i((function(e){window.history.replaceState({},document.title,"./"),n(e.email,e.code)}))},r.a.createElement("input",Object.assign({type:"email",className:"form-control",name:"cf-email",placeholder:"Email  (lowercase) "},l("email",{required:"Please enter your email."}))),r.a.createElement("input",Object.assign({type:"text",className:"form-control",name:"cf-group",placeholder:"Group"},l("code",{required:"Please enter your code."}))),r.a.createElement("button",{disabled:u,type:"submit",className:"form-control",id:"submit-button",name:"submit"},"Sign in "))))))),r.a.createElement("footer",{className:"site-footer"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"ml-auto col-lg-12 col-md-12"},r.a.createElement("p",{className:"copyright-text"},"If you have any questions, please contact xiaolianbei.org@gmail.com.  Version : 1.0.2")),r.a.createElement("div",{className:"ml-auto col-lg-12 col-md-12"},r.a.createElement("p",{className:"copyright-text"},"Copyright \xa9 2022 North America Alumni Alliance Cup. Design By Y&L Solution ",r.a.createElement("span",{role:"img","aria-label":"twist"}," \u270a "),"  Photos on Unsplash"))))))};var C,A=function(e){var t=null===new URLSearchParams(Object(s.h)().search).get("warning");return r.a.createElement(S,{warning:!t})},_=a(220),$=a.n(_),P=a(24),T=a(832),L=a(842),D=a(840),I=a(843),W=a(225),q=a.n(W),U=(a(377),a(185)),V=a(838),M=a(844),B=a(445),F=a.n(B),z=["children","onClose"],R=function(e){var t=e.children,a=e.onClose,r=Object(U.a)(e,z);return n.createElement(V.a,Object.assign({sx:{m:0,p:2}},r),t,a?n.createElement(M.a,{"aria-label":"close",onClick:a,sx:{position:"absolute",right:8,top:8,color:function(e){return e.palette.grey[500]}}},n.createElement(F.a,null)):null)},Y=Object(b.a)(C||(C=Object(h.a)(["\n  mutation updateVote($input: [SongInputInsertInput]) {\n    updateVote(input:$input) {\n      output\n    }\n  }\n"]))),G=function(){var e=x(),t=Object(v.b)(Y,{onCompleted:function(t){return e(),!0}}),a=Object(g.a)(t,2),n=a[0];return[function(e){return n({variables:{input:e}})},a[1]]};var H,J=function(e){var t=G(),a=Object(g.a)(t,1)[0],o=(x(),Object(P.a)(T.a)((function(e){var t=e.theme;return{"& .MuiDialog-paper":{minWidth:"500px"},"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}}))),c=Object(n.useState)([]),i=Object(g.a)(c,2),l=i[0],s=i[1],u=r.a.useState(!1),m=Object(g.a)(u,2),d=m[0],p=m[1],f=r.a.useState(!1),h=Object(g.a)(f,2),b=h[0];h[1],Object(n.useEffect)((function(){var t=[];e.data&&(e.data.songLists.map((function(e){return 0!==e.rank&&""!==e.rank&&t.push({_id:e._id,rank:e.rank,song:e.SongName}),e})),s(t))}),[e.data]);var v=function(){p(!1)},E=[{name:"Index",selector:function(e,t){return r.a.createElement("span",null," ",t+1," ")},width:"10%"},{name:"Name",selector:function(e){return e.SongName},width:"55%"},{name:"Click to Listen",selector:function(e){return r.a.createElement("a",{href:e.SongLink,target:"external-url"},r.a.createElement(q.a,null))},width:"15%"},{name:"Ranking",selector:function(e){return e.rank}}],w=e.data?e.data.songLists:[];return r.a.createElement("section",{className:"hero-list d-flex flex-column justify-content-center align-items-center"},r.a.createElement(O.a,null),r.a.createElement(o,{onClose:v,"aria-labelledby":"customized-dialog-title",open:d},r.a.createElement(R,{id:"customized-dialog-title",onClose:v},"Ready to Submit"),r.a.createElement(L.a,null,b?r.a.createElement("span",{style:{color:"red"}}," Found Duplicated rank number"):r.a.createElement("div",null,"Here is the summary, please review it. You can click confirm and submit button to save the voting."),r.a.createElement("br",null),r.a.createElement("ul",null,l.map((function(e){return r.a.createElement("li",{key:e.song}," ",e.song,"'s rank: ",e.rank,"  ")})))),r.a.createElement(I.a,null,r.a.createElement(D.a,{autoFocus:!0,onClick:function(){p(!1);var t=[];l.map((function(a){return t.push({_id:a._id,rank:a.rank,song:a.song,access_token:e.token}),a})),a(t)},disabled:b},"Confirm and Submit"))),r.a.createElement("div",{className:"bg-overlay-list"}),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-10 col-md-10 mx-auto col-12"},r.a.createElement("h3",{className:"text-white"},"Welcome to the NAAAC voting system"),r.a.createElement("br",null),r.a.createElement("p",{className:"text-white"},"The voting has ended at ",r.a.createElement("b",null,"01/14/2022 21:00 PM PST"),". Here is the final view of your voting. Thanks very much for participating the competition. If you have any questions please reach out xiaolianbei.org@gmail.com ."))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-10 col-md-10 mx-auto col-12"},r.a.createElement("div",{className:"mt-5 text-center"},r.a.createElement($.a,{columns:E,data:w,progressPending:e.loading}))))))},Q=Object(b.a)(H||(H=Object(h.a)(["\nquery get_song_list($access_token: String!,$revieweremail: String!) {\n  songLists(query: {access_token: $access_token, revieweremail: $revieweremail}) {\n    SongName\n    SongLink\n    rank\n    _id\n  }\n  }"])));var K={settings:{layout:{}},routes:[{path:"/home",component:A},{path:"/list",component:function(e){var t=k(),a=Object(g.a)(t,1)[0],n="",o="";a&&null!==a&&(n=a.split("&&")[0],o=a.split("&&")[1]);var c=Object(v.c)(Q,{variables:{access_token:n,revieweremail:o}}),i=c.loading,l=c.error,s=c.data;return l?r.a.createElement(S,{warning:!0}):"undefined"===typeof n||""===n?r.a.createElement(S,null):(Date.now(),new Date(2022,1,14,21,0,0),r.a.createElement(J,{loading:i,error:l,data:s,token:n}))}},{path:"/logout",component:function(e){return r.a.createElement("section",{className:"hero d-flex flex-column justify-content-center align-items-center",id:"home"},r.a.createElement("div",{className:"bg-overlay"}),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-8 col-md-10 mx-auto col-12"},r.a.createElement("div",{className:"hero-text mt-5 text-center"},r.a.createElement("h4",{className:"text-white"},"Thank you for using NAAAC-North America Alumni Alliance Cup Singing Competition Voting System"),r.a.createElement("h4",{className:"text-white"},"Your votes is important to us."),r.a.createElement("h4",{className:"text-white"},"We will keep you update on the voting result. Wish you have a nice day!")),r.a.createElement("div",{className:"col-lg-4 col-md-4 mx-auto col-4"},r.a.createElement("button",{type:"button",onClick:function(){window.location.href="./"},className:"form-control",id:"submit-button",name:"submit"},"Sign in to vote"))))))}},{path:"/errors/404",component:p}]},X=[].concat(Object(m.a)(K.routes),[{path:"/",exact:!0,component:A},{component:function(){return r.a.createElement(s.a,{to:"/errors/404"})}}]),Z=a(447),ee=a(145);var te=function(e){return r.a.createElement(u.Consumer,null,(function(e){var t=e.routes;return r.a.createElement("div",null,r.a.createElement(ee.a,null,Object(Z.a)(t)))}))},ae=a(59),ne=a(294),re=a(833),oe=a(834),ce=a(835),ie=new ne.a("naaac-app-ugrsu");function le(){return se.apply(this,arguments)}function se(){return(se=Object(y.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ie.currentUser){e.next=5;break}return e.next=3,ie.logIn(ne.b.anonymous());case 3:e.next=7;break;case 5:return e.next=7,ie.currentUser.refreshCustomData();case 7:return e.abrupt("return",ie.currentUser.accessToken);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ue=new re.a({link:new oe.a({uri:"https://us-west-2.aws.realm.mongodb.com/api/client/v2.0/app/naaac-app-ugrsu/graphql",fetch:function(e){function t(t,a){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=Object(y.a)(w.a.mark((function e(t,a){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le();case 2:return n=e.sent,a.headers.Authorization="Bearer ".concat(n),e.abrupt("return",fetch(t,a));case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())}),cache:new ce.a}),me=function(){return r.a.createElement(ae.a,{client:ue},r.a.createElement(u.Provider,{value:{routes:X}},r.a.createElement(s.c,{history:l},r.a.createElement(te,null))))},de=a(296),pe=a(450),ge=a(449),fe=Object(ge.createLogger)(),he=Object(de.b)(Object(de.a)(pe.a,fe));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(i.a,{store:he},r.a.createElement(me,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[470,1,2]]]);
//# sourceMappingURL=main.f84ec852.chunk.js.map