(this.webpackJsonptriphub=this.webpackJsonptriphub||[]).push([[0],{467:function(e,t,n){e.exports=n(797)},699:function(e,t){},701:function(e,t){},712:function(e,t){},714:function(e,t){},741:function(e,t){},743:function(e,t){},744:function(e,t){},749:function(e,t){},751:function(e,t){},757:function(e,t){},759:function(e,t){},778:function(e,t){},790:function(e,t){},793:function(e,t){},797:function(e,t,n){"use strict";n.r(t);n(468),n(480);var a=n(0),r=n.n(a),c=n(76),o=n.n(c),i=n(448),l=n(61).a(),u=n(36),s=r.a.createContext({}),m=n(22);var d,f=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("p",null,"Page No Found"))},p=n(14),b=n(430),g=n(86),h=n(149),E=n(102),v=n(5),k=n.n(v),j=n(17),O=n(836),y=function(){var e=Object(O.a)(["authToken"]),t=Object(p.a)(e,3),n=t[0],a=t[1],r=t[2];return[n.authToken,function(e){return a("authToken",e)},function(){return r("authToken")}]},w=function(){var e=y(),t=Object(p.a)(e,3)[2],n=Object(E.a)();return function(){var e=Object(j.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.clearStore();case 2:t(),window.location.href="/#/logout";case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},x=Object(h.a)(d||(d=Object(g.a)(["\n  mutation login($email: String!, $code: String!) {\n    login(input: { email: $email,code:$code }) {\n      token\n    }\n  }\n"])));var C=function(e){var t=Object(a.useState)(e.warning),n=Object(p.a)(t,2),c=n[0],o=n[1];Object(a.useEffect)((function(){o(e.warning)}),[e.warning]);var i=function(){var e=Object(u.g)(),t=y(),n=Object(p.a)(t,3),a=(n[0],n[1]),c=n[2],o=Object(E.b)(x,{onCompleted:function(t){if(null===t.login)return r.a.createElement(C,{warning:!0});a(t.login.token);e.push("/list")}}),i=Object(p.a)(o,2),l=i[0];return[function(e,t){return c(),l({variables:{email:e,code:t}})},i[1]]}(),l=Object(p.a)(i,2),s=l[0],m=l[1],d=Object(b.a)({shouldUseNativeValidation:!0}),f=d.handleSubmit,g=d.register,h=m.loading;return r.a.createElement("section",{class:"hero d-flex flex-column justify-content-center align-items-center",id:"home"},r.a.createElement("div",{class:"bg-overlay"}),r.a.createElement("div",{class:"container"},r.a.createElement("div",{class:"row"},r.a.createElement("div",{class:"col-lg-8 col-md-10 mx-auto col-12"},r.a.createElement("div",{class:"hero-text mt-5 text-center"},r.a.createElement("h6",{"data-aos":"fade-up","data-aos-delay":"300"},"Welcome to NAAAC-North America Alumni Alliance Cup Singing Competition Ranking System"),r.a.createElement("h1",{class:"text-white","data-aos":"fade-up","data-aos-delay":"500"},"NAAAC"),c?r.a.createElement("h6",{"data-aos":"fade-up","data-aos-delay":"400",style:{color:"red"}},"Email or Code is incorrect!"):"",r.a.createElement("form",{onSubmit:f((function(e){o(!1),s(e.email,e.code)}))},">",r.a.createElement("input",Object.assign({type:"email",class:"form-control",name:"cf-name",placeholder:"Email"},g("email",{required:"Please enter your email."}))),r.a.createElement("input",Object.assign({type:"text",class:"form-control",name:"cf-email",placeholder:"Code"},g("code",{required:"Please enter your code."}))),r.a.createElement("button",{disabled:h,type:"submit",class:"form-control",id:"submit-button",name:"submit"},"Sign in ")))))))};var S,A=function(e){var t=null===new URLSearchParams(Object(u.h)().search).get("warning");return r.a.createElement(C,{warning:!t})},_=n(437),I=n.n(_),N=n(24),$=n(831),P=n(841),T=n(839),L=n(842),q=n(228),M=(n(689),n(184)),R=n(837),U=n(843),V=n(442),W=n.n(V),z=["children","onClose"],B=function(e){var t=e.children,n=e.onClose,r=Object(M.a)(e,z);return a.createElement(R.a,Object.assign({sx:{m:0,p:2}},r),t,n?a.createElement(U.a,{"aria-label":"close",onClick:n,sx:{position:"absolute",right:8,top:8,color:function(e){return e.palette.grey[500]}}},a.createElement(W.a,null)):null)},D=Object(h.a)(S||(S=Object(g.a)(["\n  mutation updateVote($input: [SongInputInsertInput]) {\n    updateVote(input:$input) {\n      output\n    }\n  }\n"])));var F,J=function(e){var t=function(){var e=w(),t=Object(E.b)(D,{onCompleted:function(t){return e(),!0}}),n=Object(p.a)(t,2),a=n[0];return[function(e){return a({variables:{input:e}})},n[1]]}(),n=Object(p.a)(t,2),c=n[0],o=(n[1],w()),i=Object(N.a)($.a)((function(e){var t=e.theme;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}})),l=Object(a.useState)([]),u=Object(p.a)(l,2),s=u[0],m=u[1],d=r.a.useState(!1),f=Object(p.a)(d,2),b=f[0],g=f[1],h=r.a.useState(),v=Object(p.a)(h,2),k=(v[0],v[1],r.a.useState(!1)),j=Object(p.a)(k,2),O=j[0],y=j[1];Object(a.useEffect)((function(){var t=[];e.data&&(e.data.songLists.map((function(e){0!==e.rank&&""!==e.rank&&t.push({_id:e._id,rank:e.rank,song:e.singer})})),m(t))}),[e.data]);var x=function(){g(!1)},C=function(e,t,n){if(function(e){var t=parseInt(e);return Number.isInteger(t)?!(t<0||t>6)||(Object(q.b)("Please enter integer number within a rang (1-6) !"),!1):(Object(q.b)("Please enter integer number !"),!1)}(t)){for(var a={_id:e,rank:t,song:n},r=!1,c=s.length-1;c>=0;c--)s[c]._id==e&&(s[c]=a,r=!0);r||s.push(a),m(s)}},S=[{name:"Music name",selector:function(e){return e.singer}},{name:"Music Link",selector:function(e){return r.a.createElement("a",{href:e.song,target:"external-url"},e.song)}},{name:"Ranking",selector:function(e){return r.a.createElement("input",{type:"number",min:"0",max:"6",class:"form-control",defaultValue:e.rank,name:"cf-name",onChange:function(t){return C(e._id,t.target.value,e.singer)}})}}],A=e.data?e.data.songLists:[];return r.a.createElement("section",{class:"d-flex flex-column justify-content-center align-items-center"},r.a.createElement(q.a,null),r.a.createElement(i,{onClose:x,"aria-labelledby":"customized-dialog-title",open:b},r.a.createElement(B,{id:"customized-dialog-title",onClose:x},"Ready to Submit"),r.a.createElement(P.a,null,O?r.a.createElement("span",{style:{color:"red"}}," Found duplicate ranking number"):r.a.createElement("div",null,"Here is the summary, please review it. You can click confirm and Submit button if it looks good to you. Thank you !"),r.a.createElement("br",null),r.a.createElement("ul",null,s.map((function(e){return r.a.createElement("li",{key:e.song_name}," ",e.song_name,"'s rank: ",e.rank,"  ")})))),r.a.createElement(L.a,null,r.a.createElement(T.a,{autoFocus:!0,onClick:function(){g(!1);var t=[];s.map((function(n){t.push({_id:n._id,rank:n.rank,song:n.song,access_token:e.token})})),c(t)},disabled:O},"Confirm and Submit"))),r.a.createElement("div",{class:"bg-overlay"}),r.a.createElement("div",{class:"container"},r.a.createElement("div",{class:"row"},r.a.createElement("div",{class:"col-lg-8 col-md-10 mx-auto col-12"},r.a.createElement("div",{class:"hero-text mt-5 text-center"},r.a.createElement(I.a,{columns:S,data:A,progressPending:e.loading})),r.a.createElement("div",null,r.a.createElement("button",{type:"button",class:"form-control",id:"cancel-button",onClick:function(){o()}},"Cancel"),r.a.createElement("button",{type:"button",class:"form-control",id:"submit-button",onClick:function(){!function(){for(var e=!1,t=[1,1,1,1,1,1,1],n=s.length-1;n>=0;n--)0!==parseInt(s[n].rank)&&(0==t[parseInt(s[n].rank)]?e=!0:t[parseInt(s[n].rank)]=0);return e}()?y(!1):y(!0),g(!0)}},"Submit"))))))},H=Object(h.a)(F||(F=Object(g.a)(["\nquery get_song_list($access_token: String!) {\n  songLists(query: {access_token: $access_token}) {\n    singer\n    song\n    rank\n    _id\n  }\n  }"])));var Y={settings:{layout:{}},routes:[{path:"/home",component:A},{path:"/list",component:function(e){var t=y(),n=Object(p.a)(t,3),a=n[0],c=(n[1],n[2],Object(E.c)(H,{variables:{access_token:a}})),o=c.loading,i=c.error,l=c.data;return i?r.a.createElement(C,{warning:!0}):"undefined"===typeof a||""===a?r.a.createElement(C,null):r.a.createElement(J,{loading:o,error:i,data:l,token:a})}},{path:"/logout",component:function(e){return r.a.createElement("section",{class:"hero d-flex flex-column justify-content-center align-items-center",id:"home"},r.a.createElement("div",{class:"bg-overlay"}),r.a.createElement("div",{class:"container"},r.a.createElement("div",{class:"row"},r.a.createElement("div",{class:"col-lg-8 col-md-10 mx-auto col-12"},r.a.createElement("div",{class:"hero-text mt-5 text-center"},r.a.createElement("h3",{class:"text-white"},"Thank you to use NAAAC-North America Alumni Alliance Cup Singing Competition Ranking System"),r.a.createElement("h3",{class:"text-white"},"Wish you have a nice day!"),r.a.createElement("button",{type:"button",onClick:function(){window.location.href="/"},class:"form-control",id:"submit-button",name:"submit"},"Sign in "))))))}},{path:"/errors/404",component:f}]},G=[].concat(Object(m.a)(Y.routes),[{path:"/",exact:!0,component:A},{component:function(){return r.a.createElement(u.a,{to:"/errors/404"})}}]),K=n(444),Q=n(144);var X=function(e){return r.a.createElement(s.Consumer,null,(function(e){var t=e.routes;return r.a.createElement("div",null,r.a.createElement(Q.a,null,Object(K.a)(t)))}))},Z=n(59),ee=n(292),te=n(832),ne=n(833),ae=n(834),re=new ee.a("naaac-app-ugrsu");function ce(){return oe.apply(this,arguments)}function oe(){return(oe=Object(j.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(re.currentUser){e.next=5;break}return e.next=3,re.logIn(ee.b.anonymous());case 3:e.next=7;break;case 5:return e.next=7,re.currentUser.refreshCustomData();case 7:return e.abrupt("return",re.currentUser.accessToken);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ie=new te.a({link:new ne.a({uri:"https://us-west-2.aws.realm.mongodb.com/api/client/v2.0/app/naaac-app-ugrsu/graphql",fetch:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=Object(j.a)(k.a.mark((function e(t,n){var a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce();case 2:return a=e.sent,n.headers.Authorization="Bearer ".concat(a),e.abrupt("return",fetch(t,n));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}),cache:new ae.a}),le=function(){return r.a.createElement(Z.a,{client:ie},r.a.createElement(s.Provider,{value:{routes:G}},r.a.createElement(u.c,{history:l},r.a.createElement(X,null))))},ue=n(294),se=n(447),me=n(446),de=Object(me.createLogger)(),fe=Object(ue.b)(Object(ue.a)(se.a,de));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(i.a,{store:fe},r.a.createElement(le,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[467,1,2]]]);
//# sourceMappingURL=main.18cd9f5d.chunk.js.map